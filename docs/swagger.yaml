openapi: 3.0.3
info:
  title: AnyWebsites API
  description: |
    # AnyWebsites HTML é¡µé¢æ‰˜ç®¡æœåŠ¡ API

    AnyWebsites æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ HTML é¡µé¢æ‰˜ç®¡æœåŠ¡å¹³å°ï¼ŒåŸºäº Golang å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ RESTful API æ¥å£ã€‚
    æœ¬å¹³å°ä¸“ä¸ºå¼€å‘è€…å’Œå†…å®¹åˆ›ä½œè€…è®¾è®¡ï¼Œæ”¯æŒå¿«é€Ÿéƒ¨ç½²ã€ç®¡ç†å’Œåˆ†æ HTML é¡µé¢ã€‚

    ## ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½

    ### ğŸ“„ å†…å®¹ç®¡ç†
    - **HTML é¡µé¢ä¸Šä¼ **: æ”¯æŒç›´æ¥ä¸Šä¼  HTML å†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆè®¿é—®é“¾æ¥
    - **å†…å®¹ CRUD æ“ä½œ**: å®Œæ•´çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤åŠŸèƒ½
    - **è®¿é—®æƒé™æ§åˆ¶**: æ”¯æŒå…¬å¼€å’Œç§æœ‰å†…å®¹ï¼Œå¯è®¾ç½®è®¿é—®ç 
    - **è¿‡æœŸæ—¶é—´ç®¡ç†**: å¯è®¾ç½®å†…å®¹çš„è‡ªåŠ¨è¿‡æœŸæ—¶é—´

    ### ğŸ” ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
    - **å¤šé‡è®¤è¯æ–¹å¼**: æ”¯æŒ JWT Tokenã€API Keyã€ä¼šè¯è®¤è¯
    - **ç”¨æˆ·æ³¨å†Œç™»å½•**: å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ
    - **æƒé™åˆ†çº§ç®¡ç†**: æ™®é€šç”¨æˆ·å’Œç®¡ç†å‘˜æƒé™åŒºåˆ†
    - **API å¯†é’¥ç®¡ç†**: æ¯ä¸ªç”¨æˆ·ç‹¬æœ‰çš„ API å¯†é’¥

    ### ğŸ“Š ç»Ÿè®¡åˆ†æåŠŸèƒ½
    - **è®¿é—®ç»Ÿè®¡**: å®æ—¶è®°å½•é¡µé¢è®¿é—®æ¬¡æ•°å’Œç‹¬ç«‹è®¿å®¢
    - **åœ°ç†ä½ç½®åˆ†æ**: åŸºäº MaxMind GeoIP2 çš„è®¿é—®è€…åœ°ç†åˆ†å¸ƒ
    - **æµé‡è¶‹åŠ¿**: æ—¶é—´ç»´åº¦çš„è®¿é—®é‡å˜åŒ–è¶‹åŠ¿
    - **ç”¨æˆ·è¡Œä¸º**: è®¿é—®æ¥æºã€ç”¨æˆ·ä»£ç†ç­‰è¯¦ç»†ä¿¡æ¯

    ### âš™ï¸ ç³»ç»Ÿç®¡ç†
    - **åŠ¨æ€é…ç½®**: æ”¯æŒè¿è¡Œæ—¶é…ç½®ä¿®æ”¹å’Œçƒ­é‡è½½
    - **ç”¨æˆ·ç®¡ç†**: ç®¡ç†å‘˜å¯ç®¡ç†æ‰€æœ‰ç”¨æˆ·è´¦æˆ·
    - **å†…å®¹å®¡æ ¸**: ç®¡ç†å‘˜å¯ç®¡ç†å’Œå®¡æ ¸æ‰€æœ‰å†…å®¹
    - **ç³»ç»Ÿç›‘æ§**: å¥åº·æ£€æŸ¥å’Œç³»ç»ŸçŠ¶æ€ç›‘æ§

    ## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

    - **æ•°æ®åŠ å¯†**: æ‰€æœ‰æ•æ„Ÿæ•°æ®é‡‡ç”¨åŠ å¯†å­˜å‚¨
    - **HTTPS æ”¯æŒ**: å…¨ç«™ HTTPS åŠ å¯†ä¼ è¾“
    - **è®¿é—®æ§åˆ¶**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ (RBAC)
    - **é˜²æŠ¤æœºåˆ¶**: é˜²æ­¢æ¶æ„æ”»å‡»å’Œæ»¥ç”¨

    ## ğŸš€ æŠ€æœ¯æ¶æ„

    - **åç«¯æ¡†æ¶**: Gin (Golang)
    - **æ•°æ®åº“**: PostgreSQL + Redis
    - **è®¤è¯**: JWT + Session
    - **éƒ¨ç½²**: Docker + Nginx
    - **ç›‘æ§**: å†…ç½®å¥åº·æ£€æŸ¥å’Œæ—¥å¿—ç³»ç»Ÿ

    ## ğŸ“‹ API åˆ†ç±»è¯´æ˜

    ### ğŸ” è®¤è¯æ¥å£ (Authentication)
    å¤„ç†ç”¨æˆ·æ³¨å†Œã€ç™»å½•å’Œä»¤ç‰Œç®¡ç†çš„æ ¸å¿ƒæ¥å£ã€‚

    ### ğŸ“„ å†…å®¹ç®¡ç† (Content Management)
    ç”¨æˆ·ä¸Šä¼ ã€ç®¡ç†å’Œæ“ä½œ HTML å†…å®¹çš„ä¸»è¦æ¥å£ã€‚

    ### ğŸŒ å†…å®¹è®¿é—® (Content Access)
    å…¬å¼€è®¿é—®å·²å‘å¸ƒ HTML é¡µé¢çš„æ¥å£ã€‚

    ### ğŸ‘¥ ç®¡ç†åå°æ¥å£ (Admin APIs)
    ç®¡ç†å‘˜ä¸“ç”¨çš„ç³»ç»Ÿç®¡ç†æ¥å£ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€å†…å®¹ç®¡ç†ã€ç»Ÿè®¡åˆ†æå’Œç³»ç»Ÿè®¾ç½®ã€‚

    ## ğŸ”‘ è®¤è¯æ–¹å¼è¯¦è§£

    ### Bearer Token (JWT)
    ç”¨äºç”¨æˆ· API è®¿é—®çš„ä¸»è¦è®¤è¯æ–¹å¼ï¼š
    ```
    Authorization: Bearer <your-jwt-token>
    ```

    ### API Key
    é€šè¿‡è¯·æ±‚å¤´æˆ–æŸ¥è¯¢å‚æ•°ä¼ é€’çš„ API å¯†é’¥ï¼š
    ```
    X-API-Key: <your-api-key>
    # æˆ–
    ?api_key=<your-api-key>
    ```

    ### Admin Session
    ç®¡ç†åå°ä¼šè¯è®¤è¯ï¼Œé€šè¿‡ Cookie ä¼ é€’ï¼š
    ```
    Cookie: admin_session=<session-id>
    ```

    ## ğŸ“ æŠ€æœ¯æ”¯æŒ

    å¦‚æœ‰é—®é¢˜æˆ–éœ€è¦æŠ€æœ¯æ”¯æŒï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼š
    - ğŸ“§ é‚®ç®±: support@anywebsites.com
    - ğŸ“– æ–‡æ¡£: æŸ¥çœ‹å®Œæ•´çš„ API ä½¿ç”¨æŒ‡å—
    - ğŸ”§ å·¥å…·: æä¾› Postman é›†åˆå’Œä»£ç ç¤ºä¾‹
  version: 1.0.0
  contact:
    name: AnyWebsites API Support
    email: support@anywebsites.com
    url: https://anywebsites.com/support
  license:
    name: MIT License
    url: https://opensource.org/licenses/MIT
  termsOfService: https://anywebsites.com/terms

servers:
  - url: https://localhost:8443
    description: æœ¬åœ°å¼€å‘æœåŠ¡å™¨ (HTTPS)
  - url: http://localhost:8080
    description: æœ¬åœ°å¼€å‘æœåŠ¡å™¨ (HTTP)

tags:
  - name: Health
    description: å¥åº·æ£€æŸ¥
  - name: Authentication
    description: ç”¨æˆ·è®¤è¯ç›¸å…³æ¥å£
  - name: Content Management
    description: å†…å®¹ç®¡ç†ç›¸å…³æ¥å£
  - name: Content Access
    description: å†…å®¹è®¿é—®ç›¸å…³æ¥å£
  - name: Admin - Dashboard
    description: ç®¡ç†åå°ä»ªè¡¨æ¿
  - name: Admin - Content Management
    description: ç®¡ç†åå°å†…å®¹ç®¡ç†
  - name: Admin - User Management
    description: ç®¡ç†åå°ç”¨æˆ·ç®¡ç†
  - name: Admin - Analytics
    description: ç®¡ç†åå°ç»Ÿè®¡åˆ†æ
  - name: Admin - Settings
    description: ç®¡ç†åå°ç³»ç»Ÿè®¾ç½®

paths:
  /health:
    get:
      tags:
        - Health
      summary: å¥åº·æ£€æŸ¥
      description: æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€
      responses:
        '200':
          description: æœåŠ¡å™¨æ­£å¸¸
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"

  /api/auth/register:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·æ³¨å†Œ
      description: |
        åˆ›å»ºæ–°ç”¨æˆ·è´¦æˆ·ã€‚æ³¨å†ŒæˆåŠŸåï¼Œç”¨æˆ·å°†è·å¾—ï¼š
        - å”¯ä¸€çš„ç”¨æˆ· ID
        - è‡ªåŠ¨ç”Ÿæˆçš„ API å¯†é’¥
        - é»˜è®¤çš„ç”¨æˆ·æƒé™

        **æ³¨æ„äº‹é¡¹ï¼š**
        - ç”¨æˆ·åå¿…é¡»å”¯ä¸€ï¼Œé•¿åº¦ 3-50 å­—ç¬¦
        - é‚®ç®±åœ°å€å¿…é¡»æœ‰æ•ˆä¸”å”¯ä¸€
        - å¯†ç æœ€å°‘ 6 ä½å­—ç¬¦
        - æ³¨å†Œåè´¦æˆ·é»˜è®¤ä¸ºæ¿€æ´»çŠ¶æ€
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: æ³¨å†ŒæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '409':
          description: ç”¨æˆ·åæˆ–é‚®ç®±å·²å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/login:
    post:
      tags:
        - Authentication
      summary: ç”¨æˆ·ç™»å½•
      description: |
        ç”¨æˆ·ç™»å½•è·å–è®¿é—®ä»¤ç‰Œã€‚æˆåŠŸç™»å½•åå°†è¿”å›ï¼š
        - **access_token**: ç”¨äº API è®¿é—®çš„ JWT ä»¤ç‰Œ
        - **refresh_token**: ç”¨äºåˆ·æ–°è®¿é—®ä»¤ç‰Œ
        - **expires_in**: ä»¤ç‰Œè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
        - **user**: ç”¨æˆ·åŸºæœ¬ä¿¡æ¯

        **ä»¤ç‰Œä½¿ç”¨ï¼š**
        - è®¿é—®ä»¤ç‰Œæœ‰æ•ˆæœŸä¸º 24 å°æ—¶
        - åˆ·æ–°ä»¤ç‰Œæœ‰æ•ˆæœŸä¸º 7 å¤©
        - è¯·åœ¨ä»¤ç‰Œè¿‡æœŸå‰ä½¿ç”¨åˆ·æ–°æ¥å£è·å–æ–°ä»¤ç‰Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: ç™»å½•æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/auth/refresh:
    post:
      tags:
        - Authentication
      summary: åˆ·æ–°è®¿é—®ä»¤ç‰Œ
      description: ä½¿ç”¨åˆ·æ–°ä»¤ç‰Œè·å–æ–°çš„è®¿é—®ä»¤ç‰Œ
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshRequest'
      responses:
        '200':
          description: åˆ·æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: åˆ·æ–°ä»¤ç‰Œæ— æ•ˆ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/content/upload:
    post:
      tags:
        - Content Management
      summary: ä¸Šä¼  HTML å†…å®¹
      description: |
        ä¸Šä¼  HTML å†…å®¹åˆ°å¹³å°å¹¶ç”Ÿæˆè®¿é—®é“¾æ¥ã€‚æ”¯æŒçš„åŠŸèƒ½ï¼š

        **å†…å®¹ç‰¹æ€§ï¼š**
        - æ”¯æŒå®Œæ•´çš„ HTML æ–‡æ¡£ï¼ˆåŒ…æ‹¬ CSSã€JavaScriptï¼‰
        - è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„è®¿é—® ID
        - å¯è®¾ç½®å…¬å¼€æˆ–ç§æœ‰è®¿é—®æƒé™
        - æ”¯æŒè®¾ç½®è®¿é—®ç ä¿æŠ¤
        - å¯é…ç½®å†…å®¹è¿‡æœŸæ—¶é—´

        **è®¿é—®æ§åˆ¶ï¼š**
        - **å…¬å¼€å†…å®¹**: ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡é“¾æ¥è®¿é—®
        - **ç§æœ‰å†…å®¹**: éœ€è¦æä¾›æ­£ç¡®çš„è®¿é—®ç 
        - **è¿‡æœŸæ§åˆ¶**: å¯è®¾ç½®å†…å®¹çš„è‡ªåŠ¨è¿‡æœŸæ—¶é—´

        **ç”Ÿæˆçš„è®¿é—®é“¾æ¥æ ¼å¼ï¼š**
        ```
        https://your-domain/view/{content-id}
        ```
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UploadRequest'
      responses:
        '201':
          description: ä¸Šä¼ æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Content uploaded successfully"
                  content:
                    $ref: '#/components/schemas/Content'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æœªæˆæƒè®¿é—®
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/content:
    get:
      tags:
        - Content Management
      summary: è·å–å†…å®¹åˆ—è¡¨
      description: è·å–å½“å‰ç”¨æˆ·çš„å†…å®¹åˆ—è¡¨
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: page
          in: query
          description: é¡µç 
          schema:
            type: integer
            default: 1
        - name: limit
          in: query
          description: æ¯é¡µæ•°é‡
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  contents:
                    type: array
                    items:
                      $ref: '#/components/schemas/Content'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
        '401':
          description: æœªæˆæƒè®¿é—®
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/content/{id}:
    get:
      tags:
        - Content Management
      summary: è·å–å†…å®¹è¯¦æƒ…
      description: è·å–æŒ‡å®šå†…å®¹çš„è¯¦ç»†ä¿¡æ¯
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: å†…å®¹ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    $ref: '#/components/schemas/Content'
        '404':
          description: å†…å®¹ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æœªæˆæƒè®¿é—®
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    put:
      tags:
        - Content Management
      summary: æ›´æ–°å†…å®¹
      description: æ›´æ–°æŒ‡å®šå†…å®¹
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: å†…å®¹ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Content updated successfully"
                  content:
                    $ref: '#/components/schemas/Content'
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: å†…å®¹ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æœªæˆæƒè®¿é—®
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

    delete:
      tags:
        - Content Management
      summary: åˆ é™¤å†…å®¹
      description: åˆ é™¤æŒ‡å®šå†…å®¹
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: å†…å®¹ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Content deleted successfully"
        '404':
          description: å†…å®¹ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: æœªæˆæƒè®¿é—®
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /view/{id}:
    get:
      tags:
        - Content Access
      summary: è®¿é—® HTML é¡µé¢
      description: |
        è®¿é—®å‘å¸ƒçš„ HTML é¡µé¢ã€‚è¿™æ˜¯å†…å®¹çš„å…¬å¼€è®¿é—®æ¥å£ï¼Œæ”¯æŒï¼š

        **è®¿é—®æ–¹å¼ï¼š**
        - ç›´æ¥é€šè¿‡æµè§ˆå™¨è®¿é—®
        - æ”¯æŒæ‰€æœ‰ HTTP å®¢æˆ·ç«¯
        - æ— éœ€è®¤è¯ï¼ˆå…¬å¼€å†…å®¹ï¼‰
        - ç§æœ‰å†…å®¹éœ€è¦æä¾›è®¿é—®ç 

        **åŠŸèƒ½ç‰¹æ€§ï¼š**
        - è‡ªåŠ¨è®°å½•è®¿é—®ç»Ÿè®¡
        - æ”¶é›†è®¿é—®è€…åœ°ç†ä½ç½®ä¿¡æ¯
        - è®°å½•è®¿é—®æ—¶é—´å’Œæ¥æº
        - æ”¯æŒè®¿é—®ç éªŒè¯

        **è®¿é—®ç»Ÿè®¡ï¼š**
        æ¯æ¬¡è®¿é—®éƒ½ä¼šè®°å½•ä»¥ä¸‹ä¿¡æ¯ï¼š
        - IP åœ°å€å’Œåœ°ç†ä½ç½®
        - è®¿é—®æ—¶é—´
        - ç”¨æˆ·ä»£ç†ï¼ˆæµè§ˆå™¨ä¿¡æ¯ï¼‰
        - æ¥æºé¡µé¢ï¼ˆRefererï¼‰
      parameters:
        - name: id
          in: path
          required: true
          description: å†…å®¹ID
          schema:
            type: string
            format: uuid
        - name: code
          in: query
          description: è®¿é—®ç ï¼ˆç§æœ‰å†…å®¹éœ€è¦ï¼‰
          schema:
            type: string
      responses:
        '200':
          description: é¡µé¢å†…å®¹
          content:
            text/html:
              schema:
                type: string
        '404':
          description: é¡µé¢ä¸å­˜åœ¨æˆ–å·²è¿‡æœŸ
          content:
            text/html:
              schema:
                type: string

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
    ApiKeyQuery:
      type: apiKey
      in: query
      name: api_key
    AdminSession:
      type: apiKey
      in: cookie
      name: admin_session
      description: ç®¡ç†åå°ä¼šè¯è®¤è¯

  schemas:
    User:
      type: object
      description: |
        ç”¨æˆ·è´¦æˆ·ä¿¡æ¯æ¨¡å‹ã€‚åŒ…å«ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€æƒé™çŠ¶æ€å’Œ API è®¿é—®å‡­æ®ã€‚

        **å­—æ®µè¯´æ˜ï¼š**
        - `id`: ç³»ç»Ÿç”Ÿæˆçš„å”¯ä¸€æ ‡è¯†ç¬¦
        - `username`: ç”¨æˆ·é€‰æ‹©çš„ç™»å½•åï¼Œå…¨å±€å”¯ä¸€
        - `email`: ç”¨æˆ·é‚®ç®±ï¼Œç”¨äºé€šçŸ¥å’Œæ‰¾å›å¯†ç 
        - `api_key`: è‡ªåŠ¨ç”Ÿæˆçš„ API è®¿é—®å¯†é’¥ï¼Œå¯é‡ç½®
        - `is_active`: è´¦æˆ·çŠ¶æ€ï¼Œç®¡ç†å‘˜å¯æ§åˆ¶
        - `is_admin`: ç®¡ç†å‘˜æƒé™æ ‡è¯†
      properties:
        id:
          type: string
          format: uuid
          description: ç”¨æˆ·å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ
          example: "123e4567-e89b-12d3-a456-426614174000"
        username:
          type: string
          minLength: 3
          maxLength: 50
          description: ç”¨æˆ·åï¼Œå…¨å±€å”¯ä¸€ï¼Œé•¿åº¦ 3-50 å­—ç¬¦
          example: "john_doe"
        email:
          type: string
          format: email
          description: ç”¨æˆ·é‚®ç®±åœ°å€ï¼Œå…¨å±€å”¯ä¸€
          example: "john.doe@example.com"
        api_key:
          type: string
          description: API è®¿é—®å¯†é’¥ï¼Œç”¨äº API è®¤è¯ï¼Œå¯é€šè¿‡ç®¡ç†å‘˜é‡ç½®
          example: "ak_1234567890abcdef"
        is_active:
          type: boolean
          description: è´¦æˆ·æ¿€æ´»çŠ¶æ€ï¼Œfalse è¡¨ç¤ºè´¦æˆ·è¢«ç¦ç”¨
          example: true
        is_admin:
          type: boolean
          description: ç®¡ç†å‘˜æƒé™æ ‡è¯†ï¼Œtrue è¡¨ç¤ºå…·æœ‰ç®¡ç†å‘˜æƒé™
          example: false
        created_at:
          type: string
          format: date-time
          description: è´¦æˆ·åˆ›å»ºæ—¶é—´
          example: "2024-01-15T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          description: è´¦æˆ·æœ€åæ›´æ–°æ—¶é—´
          example: "2024-01-20T14:45:00Z"

    Content:
      type: object
      description: |
        HTML å†…å®¹æ¨¡å‹ã€‚å­˜å‚¨ç”¨æˆ·ä¸Šä¼ çš„ HTML é¡µé¢åŠå…¶ç›¸å…³ä¿¡æ¯ã€‚

        **å†…å®¹ç‰¹æ€§ï¼š**
        - æ”¯æŒå®Œæ•´çš„ HTML æ–‡æ¡£
        - å¯è®¾ç½®è®¿é—®æƒé™å’Œä¿æŠ¤
        - è‡ªåŠ¨ç»Ÿè®¡è®¿é—®é‡
        - æ”¯æŒè¿‡æœŸæ—¶é—´æ§åˆ¶

        **è®¿é—®æ§åˆ¶ï¼š**
        - `is_public=true`: å…¬å¼€è®¿é—®ï¼Œä»»ä½•äººå¯é€šè¿‡é“¾æ¥è®¿é—®
        - `is_public=false`: ç§æœ‰è®¿é—®ï¼Œéœ€è¦æä¾›æ­£ç¡®çš„ access_code
        - `expires_at`: å¯é€‰çš„è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸåè‡ªåŠ¨ä¸å¯è®¿é—®
      properties:
        id:
          type: string
          format: uuid
          description: å†…å®¹å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºç”Ÿæˆè®¿é—®é“¾æ¥
          example: "456e7890-e89b-12d3-a456-426614174001"
        user_id:
          type: string
          format: uuid
          description: å†…å®¹æ‰€æœ‰è€…çš„ç”¨æˆ· ID
          example: "123e4567-e89b-12d3-a456-426614174000"
        title:
          type: string
          maxLength: 200
          description: å†…å®¹æ ‡é¢˜ï¼Œç”¨äºç®¡ç†å’Œè¯†åˆ«
          example: "æˆ‘çš„ä¸ªäººä¸»é¡µ"
        description:
          type: string
          maxLength: 1000
          description: å†…å®¹æè¿°ï¼Œå¯é€‰å­—æ®µ
          example: "è¿™æ˜¯æˆ‘çš„ä¸ªäººä»‹ç»é¡µé¢"
        html_content:
          type: string
          description: å®Œæ•´çš„ HTML æ–‡æ¡£å†…å®¹
          example: "<html><head><title>Hello</title></head><body><h1>Hello World!</h1></body></html>"
        access_code:
          type: string
          maxLength: 50
          description: ç§æœ‰å†…å®¹çš„è®¿é—®ç ï¼Œå…¬å¼€å†…å®¹å¯ä¸ºç©º
          example: "secret123"
        is_public:
          type: boolean
          description: æ˜¯å¦ä¸ºå…¬å¼€å†…å®¹ï¼Œfalse è¡¨ç¤ºéœ€è¦è®¿é—®ç 
          example: true
        expires_at:
          type: string
          format: date-time
          nullable: true
          description: å†…å®¹è¿‡æœŸæ—¶é—´ï¼Œnull è¡¨ç¤ºæ°¸ä¸è¿‡æœŸ
          example: "2024-12-31T23:59:59Z"
        view_count:
          type: integer
          minimum: 0
          description: ç´¯è®¡è®¿é—®æ¬¡æ•°ï¼Œç³»ç»Ÿè‡ªåŠ¨ç»Ÿè®¡
          example: 42
        is_active:
          type: boolean
          description: å†…å®¹æ¿€æ´»çŠ¶æ€ï¼Œfalse è¡¨ç¤ºå·²è¢«ç¦ç”¨
          example: true
        created_at:
          type: string
          format: date-time
          description: å†…å®¹åˆ›å»ºæ—¶é—´
          example: "2024-01-15T10:30:00Z"
        updated_at:
          type: string
          format: date-time
          description: å†…å®¹æœ€åæ›´æ–°æ—¶é—´
          example: "2024-01-20T14:45:00Z"

    RegisterRequest:
      type: object
      required:
        - username
        - email
        - password
      properties:
        username:
          type: string
          minLength: 3
          maxLength: 50
          description: ç”¨æˆ·å
        email:
          type: string
          format: email
          description: é‚®ç®±åœ°å€
        password:
          type: string
          minLength: 6
          description: å¯†ç 

    LoginRequest:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          description: ç”¨æˆ·å
        password:
          type: string
          description: å¯†ç 

    LoginResponse:
      type: object
      properties:
        access_token:
          type: string
          description: è®¿é—®ä»¤ç‰Œ
        refresh_token:
          type: string
          description: åˆ·æ–°ä»¤ç‰Œ
        expires_in:
          type: integer
          description: ä»¤ç‰Œè¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
        user:
          $ref: '#/components/schemas/User'

    RefreshRequest:
      type: object
      required:
        - refresh_token
      properties:
        refresh_token:
          type: string
          description: åˆ·æ–°ä»¤ç‰Œ

    UploadRequest:
      type: object
      required:
        - html_content
      properties:
        title:
          type: string
          description: æ ‡é¢˜
        description:
          type: string
          description: æè¿°
        html_content:
          type: string
          description: HTMLå†…å®¹
        is_public:
          type: boolean
          default: true
          description: æ˜¯å¦å…¬å¼€
        expires_at:
          type: string
          format: date-time
          nullable: true
          description: è¿‡æœŸæ—¶é—´
        access_code:
          type: string
          description: è®¿é—®ç 

    UpdateRequest:
      type: object
      properties:
        title:
          type: string
          description: æ ‡é¢˜
        description:
          type: string
          description: æè¿°
        html_content:
          type: string
          description: HTMLå†…å®¹
        is_public:
          type: boolean
          description: æ˜¯å¦å…¬å¼€
        expires_at:
          type: string
          format: date-time
          nullable: true
          description: è¿‡æœŸæ—¶é—´
        access_code:
          type: string
          description: è®¿é—®ç 

    ErrorResponse:
      type: object
      properties:
        error:
          type: string
          description: é”™è¯¯ä¿¡æ¯
        success:
          type: boolean
          default: false
          description: è¯·æ±‚æ˜¯å¦æˆåŠŸ

  # ç®¡ç†åå° API è·¯å¾„
  /admin/api/contents/{id}:
    delete:
      tags:
        - Admin - Content Management
      summary: åˆ é™¤å†…å®¹ï¼ˆç®¡ç†å‘˜ï¼‰
      description: ç®¡ç†å‘˜åˆ é™¤æŒ‡å®šå†…å®¹
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: å†…å®¹ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Content deleted successfully"
        '404':
          description: å†…å®¹ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'
        '401':
          description: æœªæˆæƒè®¿é—®
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/contents/{id}/restore:
    post:
      tags:
        - Admin - Content Management
      summary: æ¢å¤å†…å®¹ï¼ˆç®¡ç†å‘˜ï¼‰
      description: ç®¡ç†å‘˜æ¢å¤å·²åˆ é™¤çš„å†…å®¹
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: å†…å®¹ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: æ¢å¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Content restored successfully"
        '404':
          description: å†…å®¹ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/users/{id}/toggle-status:
    post:
      tags:
        - Admin - User Management
      summary: åˆ‡æ¢ç”¨æˆ·çŠ¶æ€
      description: ç®¡ç†å‘˜åˆ‡æ¢ç”¨æˆ·çš„æ¿€æ´»çŠ¶æ€
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: ç”¨æˆ·ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: çŠ¶æ€åˆ‡æ¢æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "User status updated successfully"
                  is_active:
                    type: boolean
                    description: æ–°çš„æ¿€æ´»çŠ¶æ€
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/users/{id}/toggle-admin:
    post:
      tags:
        - Admin - User Management
      summary: åˆ‡æ¢ç®¡ç†å‘˜æƒé™
      description: ç®¡ç†å‘˜åˆ‡æ¢ç”¨æˆ·çš„ç®¡ç†å‘˜æƒé™
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: ç”¨æˆ·ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: æƒé™åˆ‡æ¢æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Admin status updated successfully"
                  is_admin:
                    type: boolean
                    description: æ–°çš„ç®¡ç†å‘˜çŠ¶æ€
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/users/{id}/reset-api-key:
    post:
      tags:
        - Admin - User Management
      summary: é‡ç½®ç”¨æˆ·APIå¯†é’¥
      description: ç®¡ç†å‘˜é‡ç½®ç”¨æˆ·çš„APIå¯†é’¥
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: ç”¨æˆ·ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: APIå¯†é’¥é‡ç½®æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "API key reset successfully"
                  api_key:
                    type: string
                    description: æ–°çš„APIå¯†é’¥
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/users/{id}/details:
    get:
      tags:
        - Admin - User Management
      summary: è·å–ç”¨æˆ·è¯¦æƒ…
      description: ç®¡ç†å‘˜è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: ç”¨æˆ·ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  user:
                    $ref: '#/components/schemas/AdminUserDetails'
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/users/{id}/reset-password:
    post:
      tags:
        - Admin - User Management
      summary: é‡ç½®ç”¨æˆ·å¯†ç 
      description: ç®¡ç†å‘˜é‡ç½®ç”¨æˆ·å¯†ç 
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: ç”¨æˆ·ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - new_password
              properties:
                new_password:
                  type: string
                  minLength: 6
                  description: æ–°å¯†ç 
      responses:
        '200':
          description: å¯†ç é‡ç½®æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Password reset successfully"
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/users/{id}:
    delete:
      tags:
        - Admin - User Management
      summary: åˆ é™¤ç”¨æˆ·
      description: ç®¡ç†å‘˜åˆ é™¤ç”¨æˆ·
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: ç”¨æˆ·ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "User deleted successfully"
        '404':
          description: ç”¨æˆ·ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

    AdminUserDetails:
      type: object
      allOf:
        - $ref: '#/components/schemas/User'
        - type: object
          properties:
            content_count:
              type: integer
              description: å†…å®¹æ•°é‡
            last_login:
              type: string
              format: date-time
              nullable: true
              description: æœ€åç™»å½•æ—¶é—´
            total_views:
              type: integer
              description: æ€»è®¿é—®é‡

    AdminErrorResponse:
      type: object
      properties:
        success:
          type: boolean
          default: false
          description: è¯·æ±‚æ˜¯å¦æˆåŠŸ
        error:
          type: string
          description: é”™è¯¯ä¿¡æ¯

  /admin/api/geoip-stats:
    get:
      tags:
        - Admin - Analytics
      summary: è·å–åœ°ç†ä½ç½®ç»Ÿè®¡
      description: |
        ç®¡ç†å‘˜è·å–åœ°ç†ä½ç½®è®¿é—®ç»Ÿè®¡æ•°æ®ã€‚åŸºäº MaxMind GeoIP2 æ•°æ®åº“æä¾›å‡†ç¡®çš„åœ°ç†ä½ç½®ä¿¡æ¯ã€‚

        **ç»Ÿè®¡ç»´åº¦ï¼š**
        - **å›½å®¶çº§åˆ«**: è®¿é—®è€…æ‰€åœ¨å›½å®¶çš„åˆ†å¸ƒ
        - **åœ°åŒºçº§åˆ«**: å›½å®¶å†…çš„çœ/å·åˆ†å¸ƒ
        - **åŸå¸‚çº§åˆ«**: å…·ä½“åŸå¸‚çš„è®¿é—®é‡

        **æ—¶é—´èŒƒå›´ï¼š**
        - 1d: æœ€è¿‘ 24 å°æ—¶
        - 7d: æœ€è¿‘ 7 å¤©ï¼ˆé»˜è®¤ï¼‰
        - 30d: æœ€è¿‘ 30 å¤©
        - 90d: æœ€è¿‘ 90 å¤©

        **æ•°æ®ç”¨é€”ï¼š**
        - äº†è§£ç”¨æˆ·åœ°ç†åˆ†å¸ƒ
        - ä¼˜åŒ–å†…å®¹æŠ•æ”¾ç­–ç•¥
        - åˆ†æå¸‚åœºè¦†ç›–æƒ…å†µ
        - åˆ¶å®šæœ¬åœ°åŒ–ç­–ç•¥
      security:
        - AdminSession: []
      parameters:
        - name: range
          in: query
          description: æ—¶é—´èŒƒå›´
          schema:
            type: string
            enum: [1d, 7d, 30d, 90d]
            default: 7d
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  stats:
                    type: array
                    items:
                      $ref: '#/components/schemas/GeoStats'

  /admin/api/settings:
    get:
      tags:
        - Admin - Settings
      summary: è·å–æ‰€æœ‰è®¾ç½®
      description: |
        ç®¡ç†å‘˜è·å–æ‰€æœ‰ç³»ç»Ÿè®¾ç½®ã€‚ç³»ç»Ÿè®¾ç½®é‡‡ç”¨åˆ†ç±»ç®¡ç†ï¼Œæ”¯æŒåŠ¨æ€é…ç½®ã€‚

        **è®¾ç½®åˆ†ç±»ï¼š**
        - **server**: æœåŠ¡å™¨ç›¸å…³é…ç½®ï¼ˆç«¯å£ã€åŸŸåç­‰ï¼‰
        - **database**: æ•°æ®åº“è¿æ¥é…ç½®
        - **redis**: Redis ç¼“å­˜é…ç½®
        - **security**: å®‰å…¨ç›¸å…³è®¾ç½®
        - **email**: é‚®ä»¶æœåŠ¡é…ç½®
        - **storage**: æ–‡ä»¶å­˜å‚¨é…ç½®
        - **analytics**: ç»Ÿè®¡åˆ†æé…ç½®

        **è®¾ç½®ç‰¹æ€§ï¼š**
        - æ”¯æŒå¤šç§æ•°æ®ç±»å‹ï¼ˆå­—ç¬¦ä¸²ã€æ•´æ•°ã€å¸ƒå°”å€¼ã€JSONï¼‰
        - ç‰ˆæœ¬æ§åˆ¶å’Œå†å²è®°å½•
        - çƒ­é‡è½½æ”¯æŒï¼ˆéƒ¨åˆ†é…ç½®ï¼‰
        - æƒé™æ§åˆ¶å’Œå®¡è®¡æ—¥å¿—
      security:
        - AdminSession: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  settings:
                    type: array
                    items:
                      $ref: '#/components/schemas/SettingResponse'
        '500':
          description: æœåŠ¡å™¨é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

    post:
      tags:
        - Admin - Settings
      summary: åˆ›å»ºè®¾ç½®
      description: ç®¡ç†å‘˜åˆ›å»ºæ–°çš„ç³»ç»Ÿè®¾ç½®
      security:
        - AdminSession: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SettingRequest'
      responses:
        '201':
          description: åˆ›å»ºæˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Setting created successfully"
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/settings/categories:
    get:
      tags:
        - Admin - Settings
      summary: è·å–è®¾ç½®åˆ†ç±»
      description: ç®¡ç†å‘˜è·å–æ‰€æœ‰è®¾ç½®åˆ†ç±»
      security:
        - AdminSession: []
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  categories:
                    type: array
                    items:
                      $ref: '#/components/schemas/SettingCategory'

  /admin/api/settings/category/{category}:
    get:
      tags:
        - Admin - Settings
      summary: æŒ‰åˆ†ç±»è·å–è®¾ç½®
      description: ç®¡ç†å‘˜æŒ‰åˆ†ç±»è·å–ç³»ç»Ÿè®¾ç½®
      security:
        - AdminSession: []
      parameters:
        - name: category
          in: path
          required: true
          description: è®¾ç½®åˆ†ç±»
          schema:
            type: string
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  settings:
                    type: array
                    items:
                      $ref: '#/components/schemas/SettingResponse'
        '400':
          description: åˆ†ç±»å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/settings/{id}:
    put:
      tags:
        - Admin - Settings
      summary: æ›´æ–°è®¾ç½®
      description: ç®¡ç†å‘˜æ›´æ–°ç³»ç»Ÿè®¾ç½®
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: è®¾ç½®ID
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SettingRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Setting updated successfully"
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'
        '404':
          description: è®¾ç½®ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

    delete:
      tags:
        - Admin - Settings
      summary: åˆ é™¤è®¾ç½®
      description: ç®¡ç†å‘˜åˆ é™¤ç³»ç»Ÿè®¾ç½®
      security:
        - AdminSession: []
      parameters:
        - name: id
          in: path
          required: true
          description: è®¾ç½®ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: åˆ é™¤æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Setting deleted successfully"
        '404':
          description: è®¾ç½®ä¸å­˜åœ¨
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/settings/{category}/{key}/history:
    get:
      tags:
        - Admin - Settings
      summary: è·å–è®¾ç½®å†å²
      description: ç®¡ç†å‘˜è·å–è®¾ç½®çš„ä¿®æ”¹å†å²
      security:
        - AdminSession: []
      parameters:
        - name: category
          in: path
          required: true
          description: è®¾ç½®åˆ†ç±»
          schema:
            type: string
        - name: key
          in: path
          required: true
          description: è®¾ç½®é”®å
          schema:
            type: string
        - name: limit
          in: query
          description: é™åˆ¶æ•°é‡
          schema:
            type: integer
            default: 20
      responses:
        '200':
          description: è·å–æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  history:
                    type: array
                    items:
                      $ref: '#/components/schemas/SettingHistory'
        '400':
          description: å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/settings/export:
    get:
      tags:
        - Admin - Settings
      summary: å¯¼å‡ºè®¾ç½®
      description: ç®¡ç†å‘˜å¯¼å‡ºæ‰€æœ‰ç³»ç»Ÿè®¾ç½®
      security:
        - AdminSession: []
      responses:
        '200':
          description: å¯¼å‡ºæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SettingsBackup'

  /admin/api/settings/import:
    post:
      tags:
        - Admin - Settings
      summary: å¯¼å…¥è®¾ç½®
      description: ç®¡ç†å‘˜å¯¼å…¥ç³»ç»Ÿè®¾ç½®
      security:
        - AdminSession: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - backup
              properties:
                backup:
                  $ref: '#/components/schemas/SettingsBackup'
                overwrite:
                  type: boolean
                  default: false
                  description: æ˜¯å¦è¦†ç›–ç°æœ‰è®¾ç½®
      responses:
        '200':
          description: å¯¼å…¥æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Settings imported successfully"
        '400':
          description: è¯·æ±‚å‚æ•°é”™è¯¯
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

  /admin/api/settings/reload:
    post:
      tags:
        - Admin - Settings
      summary: é‡è½½é…ç½®
      description: ç®¡ç†å‘˜è§¦å‘é…ç½®é‡è½½
      security:
        - AdminSession: []
      responses:
        '200':
          description: é‡è½½æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Configuration reloaded successfully"
        '500':
          description: é‡è½½å¤±è´¥
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminErrorResponse'

    # æ–°å¢çš„æ•°æ®æ¨¡å‹
    GeoStats:
      type: object
      properties:
        country:
          type: string
          description: å›½å®¶
        region:
          type: string
          description: åœ°åŒº
        city:
          type: string
          description: åŸå¸‚
        count:
          type: integer
          description: è®¿é—®æ¬¡æ•°

    SettingResponse:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: è®¾ç½®ID
        category:
          type: string
          description: è®¾ç½®åˆ†ç±»
        key:
          type: string
          description: è®¾ç½®é”®å
        value:
          description: è®¾ç½®å€¼ï¼ˆæ ¹æ®value_typeè§£æï¼‰
        value_type:
          type: string
          enum: [string, int, bool, json]
          description: å€¼ç±»å‹
        description:
          type: string
          description: è®¾ç½®æè¿°
        is_active:
          type: boolean
          description: æ˜¯å¦å¯ç”¨
        is_system:
          type: boolean
          description: æ˜¯å¦ä¸ºç³»ç»Ÿå†…ç½®è®¾ç½®
        version:
          type: integer
          description: ç‰ˆæœ¬å·
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        updated_at:
          type: string
          format: date-time
          description: æ›´æ–°æ—¶é—´
        creator:
          $ref: '#/components/schemas/User'
        updater:
          $ref: '#/components/schemas/User'

    SettingRequest:
      type: object
      required:
        - category
        - key
        - value
        - description
      properties:
        category:
          type: string
          description: è®¾ç½®åˆ†ç±»
        key:
          type: string
          description: è®¾ç½®é”®å
        value:
          type: string
          description: è®¾ç½®å€¼
        description:
          type: string
          description: è®¾ç½®æè¿°
        reason:
          type: string
          description: ä¿®æ”¹åŸå› 

    SettingCategory:
      type: object
      properties:
        name:
          type: string
          description: åˆ†ç±»åç§°
        display_name:
          type: string
          description: æ˜¾ç¤ºåç§°
        description:
          type: string
          description: åˆ†ç±»æè¿°
        count:
          type: integer
          description: è®¾ç½®æ•°é‡

    SettingHistory:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: å†å²è®°å½•ID
        setting_id:
          type: string
          format: uuid
          description: è®¾ç½®ID
        old_value:
          type: string
          description: æ—§å€¼
        new_value:
          type: string
          description: æ–°å€¼
        reason:
          type: string
          description: ä¿®æ”¹åŸå› 
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        created_by:
          type: string
          format: uuid
          description: åˆ›å»ºè€…ID
        creator:
          $ref: '#/components/schemas/User'

    SettingsBackup:
      type: object
      properties:
        version:
          type: string
          description: å¤‡ä»½ç‰ˆæœ¬
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´
        settings:
          type: array
          items:
            $ref: '#/components/schemas/SettingResponse'
        metadata:
          type: object
          properties:
            total_count:
              type: integer
              description: è®¾ç½®æ€»æ•°
            categories:
              type: array
              items:
                type: string
              description: åŒ…å«çš„åˆ†ç±»

    ContentAnalytics:
      type: object
      properties:
        id:
          type: string
          format: uuid
          description: åˆ†æè®°å½•ID
        content_id:
          type: string
          format: uuid
          description: å†…å®¹ID
        user_id:
          type: string
          format: uuid
          description: ç”¨æˆ·ID
        ip_address:
          type: string
          description: IPåœ°å€
        user_agent:
          type: string
          description: ç”¨æˆ·ä»£ç†
        referer:
          type: string
          description: æ¥æºé¡µé¢
        country:
          type: string
          description: å›½å®¶
        region:
          type: string
          description: åœ°åŒº
        city:
          type: string
          description: åŸå¸‚
        latitude:
          type: number
          format: float
          description: çº¬åº¦
        longitude:
          type: number
          format: float
          description: ç»åº¦
        access_time:
          type: string
          format: date-time
          description: è®¿é—®æ—¶é—´
        created_at:
          type: string
          format: date-time
          description: åˆ›å»ºæ—¶é—´

    OverviewStats:
      type: object
      properties:
        total_views:
          type: integer
          description: æ€»è®¿é—®é‡
        total_contents:
          type: integer
          description: æ€»å†…å®¹æ•°
        active_contents:
          type: integer
          description: æ´»è·ƒå†…å®¹æ•°
        today_views:
          type: integer
          description: ä»Šæ—¥è®¿é—®é‡
        unique_visitors:
          type: integer
          description: ç‹¬ç«‹è®¿å®¢æ•°

    TrafficStats:
      type: object
      properties:
        date:
          type: string
          format: date
          description: æ—¥æœŸ
        views:
          type: integer
          description: è®¿é—®é‡
        unique_ips:
          type: integer
          description: ç‹¬ç«‹IPæ•°


