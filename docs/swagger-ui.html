<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnyWebsites API 文档</title>
    <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui.css" />
    <style>
        html {
            box-sizing: border-box;
            overflow: -moz-scrollbars-vertical;
            overflow-y: scroll;
        }

        *, *:before, *:after {
            box-sizing: inherit;
        }

        body {
            margin: 0;
            background: #fafafa;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .swagger-ui .topbar {
            background-color: #667eea;
            background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .swagger-ui .topbar .download-url-wrapper {
            display: none;
        }

        .swagger-ui .info .title {
            color: #333;
        }

        .custom-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            margin-bottom: 0;
        }

        .custom-header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .custom-header p {
            margin: 10px 0 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .api-info {
            background: white;
            padding: 20px;
            margin: 0;
            border-bottom: 1px solid #e8e8e8;
        }

        .api-info h2 {
            color: #333;
            margin-top: 0;
        }

        .api-info .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .info-card h3 {
            margin: 0 0 10px 0;
            color: #667eea;
            font-size: 1.1rem;
        }

        .info-card ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-card li {
            margin-bottom: 5px;
        }

        .auth-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .auth-info h3 {
            color: #856404;
            margin-top: 0;
        }

        .auth-example {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 10px 0;
        }

        /* 额外资源样式 */
        .extra-resources {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .extra-resources h3 {
            color: #495057;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .resource-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .resource-link {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            text-decoration: none;
            color: #495057;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .resource-link:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);
        }

        .resource-link i:first-child {
            font-size: 1rem;
        }

        .resource-link i:last-child {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        #swagger-ui {
            max-width: none;
        }
    </style>
</head>
<body>
    <div class="custom-header">
        <h1>🌐 AnyWebsites API</h1>
        <p>HTML 页面托管服务 API 文档</p>
    </div>

    <div class="api-info">
        <h2>📋 API 概览</h2>
        <div class="info-grid">
            <div class="info-card">
                <h3>🔐 认证接口</h3>
                <ul>
                    <li>用户注册和登录</li>
                    <li>JWT Token 管理</li>
                    <li>API Key 认证</li>
                </ul>
            </div>
            <div class="info-card">
                <h3>📄 内容管理</h3>
                <ul>
                    <li>HTML 内容上传</li>
                    <li>内容 CRUD 操作</li>
                    <li>访问权限控制</li>
                </ul>
            </div>
            <div class="info-card">
                <h3>👥 管理后台</h3>
                <ul>
                    <li>用户管理</li>
                    <li>内容管理</li>
                    <li>统计分析</li>
                    <li>系统设置</li>
                </ul>
            </div>
            <div class="info-card">
                <h3>📊 统计分析</h3>
                <ul>
                    <li>访问统计</li>
                    <li>地理位置分析</li>
                    <li>流量趋势</li>
                </ul>
            </div>
        </div>

        <div class="auth-info">
            <h3>🔑 认证方式</h3>
            <p><strong>Bearer Token:</strong> 用于用户 API 访问</p>
            <div class="auth-example">Authorization: Bearer &lt;your-jwt-token&gt;</div>
            
            <p><strong>API Key:</strong> 通过请求头或查询参数</p>
            <div class="auth-example">X-API-Key: &lt;your-api-key&gt;<br>或<br>?api_key=&lt;your-api-key&gt;</div>
            
            <p><strong>Admin Session:</strong> 管理后台会话认证</p>
            <div class="auth-example">Cookie: admin_session=&lt;session-id&gt;</div>
        </div>

        <!-- 额外资源链接 -->
        <div class="extra-resources">
            <h3>📚 更多资源</h3>
            <div class="resource-links">
                <a href="/docs/API_EXAMPLES.md" target="_blank" class="resource-link">
                    <i class="bi bi-code-slash"></i>
                    <span>代码示例</span>
                    <i class="bi bi-box-arrow-up-right"></i>
                </a>
                <a href="/docs/AnyWebsites-API.postman_collection.json" target="_blank" class="resource-link">
                    <i class="bi bi-download"></i>
                    <span>Postman 集合</span>
                    <i class="bi bi-box-arrow-up-right"></i>
                </a>
            </div>
        </div>
    </div>

    <div id="swagger-ui"></div>

    <script src="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.3/swagger-ui-standalone-preset.js"></script>
    <script>
        window.onload = function() {
            // 获取当前页面的基础 URL
            const baseUrl = window.location.origin + window.location.pathname.replace('/swagger-ui.html', '');
            
            const ui = SwaggerUIBundle({
                url: baseUrl + '/swagger.yaml',
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout",
                defaultModelsExpandDepth: 1,
                defaultModelExpandDepth: 1,
                docExpansion: "list",
                filter: true,
                showExtensions: true,
                showCommonExtensions: true,
                tryItOutEnabled: true,
                requestInterceptor: function(request) {
                    // 可以在这里添加默认的请求头
                    console.log('Request:', request);
                    return request;
                },
                responseInterceptor: function(response) {
                    console.log('Response:', response);
                    return response;
                },
                onComplete: function() {
                    console.log('Swagger UI 加载完成');
                },
                onFailure: function(error) {
                    console.error('Swagger UI 加载失败:', error);
                }
            });

            // 添加自定义样式
            const style = document.createElement('style');
            style.textContent = `
                .swagger-ui .scheme-container {
                    background: #f8f9fa;
                    border: 1px solid #dee2e6;
                    border-radius: 8px;
                    padding: 15px;
                    margin: 20px 0;
                }
                
                .swagger-ui .info {
                    margin: 20px 0;
                }
                
                .swagger-ui .info .title {
                    font-size: 2rem;
                    color: #667eea;
                }
                
                .swagger-ui .opblock.opblock-post {
                    border-color: #49cc90;
                    background: rgba(73, 204, 144, 0.1);
                }
                
                .swagger-ui .opblock.opblock-get {
                    border-color: #61affe;
                    background: rgba(97, 175, 254, 0.1);
                }
                
                .swagger-ui .opblock.opblock-put {
                    border-color: #fca130;
                    background: rgba(252, 161, 48, 0.1);
                }
                
                .swagger-ui .opblock.opblock-delete {
                    border-color: #f93e3e;
                    background: rgba(249, 62, 62, 0.1);
                }
            `;
            document.head.appendChild(style);
        };
    </script>
</body>
</html>
